@model Infra.ViewModel.ChamadoViewModel

@{
    ViewBag.Title = "Criar Chamado";
}

<div class="jumbotron">
    <h3>Criar Chamado</h3>
</div>
<div class="card">
    <div class="card-body">
        @using (Html.BeginForm("CriarChamado", "Assistencia", FormMethod.Post, new { @class = "form-auth-small" }))
        {
            <div class="form-group">
                <div class="col-md-12">
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Email, new { @class = "control-label" })
                            @Html.TextBoxFor(model => model.Email, new { @readonly = true, @class = "form-control", @type = "email", @id = "email", @placeholder = "Email", @Value = @Session["EmailUsuario"].ToString() })
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Titulo, new { @class = "control-label" })
                            @Html.TextBoxFor(model => model.Titulo, new { @class = "form-control", @id = "tituloChamado", @placeholder = "Titulo Chamado", @type = "text" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-12">
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Funcionario.Username, new { @class = "control-label" })
                            @Html.TextBoxFor(model => model.Funcionario.Username, new { @readonly = true, @class = "form-control", @type = "text", @placeholder = "Username Solicitante", @id = "username", @Value = @Session["UserName"].ToString() })
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(m => m.Sistema, new { @class = "control-label" })
                            @Html.DropDownListFor(m => m.Sistemas, new SelectList(Model.Sistemas, "Id", "Nome"), "Sistema", new { @class = "form-control", @id = "sistemaId" })
                            @Html.HiddenFor(m => m.SistemaId, new { @id = "sId"})
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-12">
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Prioridade, new { @class = "control-label" })
                            @Html.DropDownListFor(m => m.Prioridades, new SelectList(Model.Prioridades, "Id", "Descricao"), "Prioridade", new { @class = "form-control", @data_toggle = "tooltip", @data_placement = "top", @title = "Urgencia" })
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Severidade, new { @class = "control-label" })
                            @Html.DropDownListFor(m => m.Severidades, new SelectList(Model.Severidades, "Id", "Descricao"), "Severidade", new { @class = "form-control", @data_toggle = "tooltip", @data_placement = "top", @title = "Impacto" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-12">
                    <div class="col-md-12">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Descricao, new { @class = "control-label" })
                            @Html.TextAreaFor(model => model.Descricao, new { @class = "form-control", @id = "descricao", @type = "text", @placeholder = "Descrição Chamado", @rows = "3" })
                        </div>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-primary btn-lg btn-block">Criar Chamado</button>

        }
    </div>
</div>

<script type="text/javascript">
  $(function () {
      $("#sistemaId").on("select", function () {
          alert($(this).val());
         $("#sId").val($(this).text());
        alert($("#sId").val($(this).text()));
    });
});
</script>